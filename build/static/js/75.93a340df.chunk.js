"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[75],{7263:function(e,t,n){var a=n(5861),r=n(7757),i=n.n(r),s=n(5485),o=n(8183),c=(n(2791),n(2622)),u=n(3695),l=n(184);t.Z=function(e){var t=e.dataSource,n=e.setDataSource,r=e.row,d=e.delFunct,f=e.setTablesDataToFormValues,p=function(){var e=(0,a.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.delEl,t.newData,u.ZP.loading({content:"Loading...",key:"delete"}),e.next=4,d(n);case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){r.Id||r.id&&(r.Id=r.id,t.forEach((function(e){return e.Id=e.id})))};return(0,l.jsx)(s.Z.Link,{children:(0,l.jsx)("div",{onClick:function(e){return e.stopPropagation()},children:(0,l.jsx)(o.Z,{title:"Are you sure you want to delete this item?",okText:"Yes",cancelText:"No",onConfirm:function(e){m();var a=t.filter((function(e){return e.Id!==r.Id})),i=t.find((function(e){return e.Id===r.Id}));d?p({delEl:i,newData:a}):(f&&f(a),n(a))},children:(0,l.jsx)("div",{style:{color:"red"},children:(0,l.jsx)(c.Z,{})})})})})}},9270:function(e,t,n){var a=n(2666);t.Z=function(){var e=(0,a.b)(),t=e.setFormValues,n=e.setSavedDrawingCanvas,r=e.setDescriptionsCanvas,i=e.setAnalizFileList,s=e.setRecipeList,o=e.setListRecipe,c=e.setDataFamily,u=e.setVisitDataTable,l=e.setAnalisesDataTable,d=e.setManagersPlaces,f=e.setManagersList,p=e.setDeseaseHistoryDynamicsList,m=e.setIsClearForm;return{clearPatient:function(){m(!0),t({Anket:{gender:"Female",alkogol:0,smoke:0},Potient:{},Morbi:{familyMembersList:[]},Vizit:{},treatmentRB:{},Analiz:{}}),n({}),r({}),i({}),s([]),o([]),c([]),c([]),u([]),l([]),d([]),f([]),p([])}}}},2075:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var a=n(5861),r=n(9439),i=n(7757),s=n.n(i),o=n(2791),c=n(6106),u=n(9508),l=n(5597),d=n(4749),f=n(2426),p=n.n(f),m=n(6871),v=n(2666),x=n(9270),h=n(4942),b=n(1413),Z=n(3734),y=n(570),w=n(9389),D=n(720),g=n(8431),j=n(3695),I=function(){var e=(0,a.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.Z)("patientid",{},"get");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(e){(0,d.Z)("visitsformcalendar",e,"post")},C=function(){var e=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.Z)("patients/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=(0,a.Z)(s().mark((function e(t){var n,a,r,i,o,c,u,l,f,p,m,v;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.sendObj).patientId){e.next=7;break}r=n.patientId,C(r).then((function(e){null!==e&&void 0!==e&&e.data?a=n.patientId:j.ZP.warning({content:"The Patient not find",key:"info_message",duration:4})})),a=n.patientId,e.next=10;break;case 7:return e.next=9,I();case 9:a=e.sent;case 10:if(i=n.patientName,o=n.patientSurName,c=n.patientPatronymic,u=n.visitDate,l=n.phoneNumber,f=n.status,p=n.visitReason,m={patientVisitsList:[{patientId:a,status:f,visitDate:u,visitReason:p}]},v={patientId:a,patientName:i,patientSurName:o,patientPatronymic:c,phoneNumber:l},!a){e.next=18;break}if(n.patientId){e.next=17;break}return e.next=17,s=v,void(0,d.Z)("vite",s,"post");case 17:k(m);case 18:case"end":return e.stop()}var s}),e)})));return function(t){return e.apply(this,arguments)}}(),N=n(184),P=Z.Z.Option,L=function(){var e=y.Z.useForm(),t=(0,r.Z)(e,1)[0],n=(0,v.b)(),i=n.formVisitCalendar,o=n.setformVisitCalendar,u=n.isAddVisit,l=n.setIsAddVisit,d=function(e){var t=(0,r.Z)(e,1)[0],n=t.name,a=t.value;o((0,b.Z)((0,b.Z)({},i),{},(0,h.Z)({},n,a)))},f=function(){var e=(0,a.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.visitDate,i.visitDate=p()(t).format("YYYY-MM-DD HH:mm"),n=i,e.next=5,M({sendObj:n});case 5:l(!u);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,N.jsxs)("div",{children:[(0,N.jsx)(c.Z,{justify:"space-between",style:{marginLeft:"5%"},children:(0,N.jsxs)(y.Z,{style:{margin:"10px"},onFieldsChange:d,form:t,layout:"inline",children:[(0,N.jsx)(y.Z.Item,{label:"Id",name:"patientId",children:(0,N.jsx)(w.Z,{type:"number",allowClear:!0})}),(0,N.jsx)(y.Z.Item,{label:"Name",name:"patientName",children:(0,N.jsx)(w.Z,{allowClear:!0})}),(0,N.jsx)(y.Z.Item,{label:"Surname",name:"patientSurName",children:(0,N.jsx)(w.Z,{allowClear:!0})}),(0,N.jsx)(y.Z.Item,{label:"Reason",name:"visitReason",children:(0,N.jsx)(w.Z,{allowClear:!0})})]})}),(0,N.jsx)(c.Z,{style:{marginLeft:"5%"},children:(0,N.jsxs)(y.Z,{style:{margin:"10px"},onFieldsChange:d,form:t,layout:"inline",children:[(0,N.jsx)(y.Z.Item,{label:"Date",name:"visitDate",children:(0,N.jsx)(D.Z,{showTime:!0,allowClear:!0,format:"YYYY-MM-DD HH:mm",defaultValue:p()()})}),(0,N.jsx)(y.Z.Item,{label:"Mobile Number",name:"phoneNumber",children:(0,N.jsx)(g.CX,{allowClear:!0,style:{width:"130px"},mask:"000 000 00 00"})}),(0,N.jsx)(y.Z.Item,{label:"Status",name:"status",children:(0,N.jsxs)(Z.Z,{allowClear:!0,style:{width:120},children:[(0,N.jsx)(P,{value:"unsolved",children:"Unsolved"}),(0,N.jsx)(P,{value:"approved",children:"Approved"})]})}),(0,N.jsx)("button",{onClick:f,className:"new_button",children:"Add"})]})})]})},Y=function(){var e=(0,m.s0)(),t=(0,v.b)(),n=t.isAddVisit,a=t.setIsAddVisit,r=t.setformVisitCalendar,i=(0,x.Z)().clearPatient;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(c.Z,{style:{marginLeft:"5%"},children:[(0,N.jsx)("button",{onClick:function(){i(),e("/profile")},className:"new_button",children:"New Patient"}),(0,N.jsx)("button",{onClick:function(){a((function(e){return!e})),r({})},className:"new_button",children:"Add visit"})]}),n?(0,N.jsx)(L,{}):""]})},T=Z.Z.Option,A=function(e){var t=e.value,n=e.row,r=e.updatePage,i=function(){var e=(0,a.Z)(s().mark((function e(t){var a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.id,i={id:a,status:t},e.next=4,(0,d.Z)("visittable",i,"post");case 4:r();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,N.jsxs)(Z.Z,{onSelect:i,defaultValue:t,allowClear:!0,style:{width:120},children:[(0,N.jsx)(T,{value:"unsolved",children:"Unsolved"}),(0,N.jsx)(T,{value:"approved",children:"Approved"})]})},R=(0,o.memo)(A),V=n(7263),S=function(e){var t=e.getDataTable,n=(0,o.useState)(!1),a=(0,r.Z)(n,2),i=a[0],s=a[1];return(0,o.useEffect)((function(){i&&s(!1)}),[i]),{isChangeDataTable:i,updatePage:function(e){console.log(e.visitDate);var n=null!==e&&void 0!==e&&e.visitDate?e.visitDate:p()().format("YYYY-MM-DD 00:00:00");t(n),s(!0)}}},F=n(1320),_=function(){var e=(0,v.b)().isAddVisit,t=(0,o.useState)([]),n=(0,r.Z)(t,2),i=n[0],f=n[1],m=function(){var e=(0,a.Z)(s().mark((function e(t){var n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},t&&(n.moment=t),e.next=4,(0,d.Z)("visits/"+t);case 4:a=e.sent,f(a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=S({getDataTable:m}),h=x.isChangeDataTable,b=x.updatePage;(0,o.useEffect)((function(){e||m(p()().format("YYYY-MM-DD 00:00:00"))}),[e]);var Z=function(){var e=(0,a.Z)(s().mark((function e(t){var n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.Id,e.next=3,(0,d.Z)("visits/"+n,{},"delete");case 3:return a=e.sent,b(),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=[{title:"Patient Number",dataIndex:"patientId",ellipsis:!0},{title:"Time",dataIndex:"visitDate",width:150},{title:"Name",dataIndex:"patientName"},{title:"Surname",dataIndex:"patientSurName"},{title:"Patronymic",dataIndex:"patientPatronymic",ellipsis:!0},{title:"Age",dataIndex:"birthDate",render:function(e){return e?p()().diff(e,"years"):""}},{title:"Mobile number",ellipsis:!0,width:120,dataIndex:"phoneNumber"},{title:"Reason",dataIndex:"visitReason"},{title:"Address",dataIndex:"placeName"},{title:"Recomendation",dataIndex:"recommendationPerson",ellipsis:!0},{title:"Status",dataIndex:"status",width:150,render:function(e,t,n){return(0,N.jsx)("div",{className:"xxxx",onClick:function(e){e.stopPropagation(),e.preventDefault()},children:(0,N.jsx)(R,{value:e,row:t,updatePage:function(){return b(t)}})})}},{title:"",width:40,dataIndex:"delete",key:"delete",render:function(e,t,n){return(0,N.jsx)(V.Z,{row:t,dataSource:i,setDataSource:f,delFunct:Z})}}],w=(0,o.useMemo)((function(e){if(i[0])return function(e){var t=function(e,t){var n=[];return t.forEach((function(t){t.visitDate.slice(0,10)===p()(e).format("YYYY-MM-DD")&&n.push({type:"approved"===t.status?"success":"warning",content:t.patientName,id:t.id})})),n}(e,i);if(t[0])return(0,N.jsx)("div",{style:{borderTop:"1px solid black"}})}}),[i,e,h]),D=(0,F.Z)().onRowTable;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(Y,{}),(0,N.jsx)(c.Z,{children:(0,N.jsx)(u.Z,{dateCellRender:w,className:"CallCalendar",fullscreen:!1,onPanelChange:function(e,t){},onChange:function(e){var t=p()(e._d).format("YYYY-MM-DD 00:00:00");m(t)}})}),(0,N.jsx)(c.Z,{children:(0,N.jsx)("div",{style:{border:"1px solid gray",position:"sticky",marginTop:"20px"},children:(0,N.jsx)(l.Z,{bordered:!0,pagination:!1,columns:y,dataSource:i,rowClassName:function(e){if("operation"===e.visitReason)return"table_row_pink_color"},onRow:function(e,t){return{onClick:function(n){return D(e,t)}}}})})})]})}},7979:function(e,t,n){var a=n(2666);t.Z=function(){var e=(0,a.b)(),t=e.setRecipeList,n=e.setListRecipe,r=e.setFormValues,i=e.setVisitDataTable,s=e.setAnalisesDataTable;return{clearDataProfileTables:function(){r({Anket:{gender:"Female",alkogol:0,smoke:0},Potient:{},Morbi:{familyMembersList:[]},Vizit:{},treatmentRB:{},Analiz:{}}),i([]),t([]),n([]),s([])}}}},1320:function(e,t,n){var a=n(4942),r=n(5861),i=n(7757),s=n.n(i),o=n(2426),c=n.n(o),u=n(6871),l=n(4749),d=n(2666),f=n(7979);t.Z=function(){var e=(0,d.b)(),t=e.formValues,n=e.setRecipeList,i=e.setListRecipe,o=e.setFormValues,p=e.setVisitDataTable,m=e.setAnalisesDataTable,v=e.setSavedDrawingCanvas,x=e.setDescriptionsCanvas,h=e.setDataFamily,b=e.setDeseaseHistoryDynamicsList,Z=(0,u.s0)(),y=function(){var e=(0,r.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.Z)("vite/"+t,{},"get");case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(e){var t;if(null!==(t=e.data)&&void 0!==t&&t.familyMembersList)try{var n=[];e.data.familyMembersList.forEach((function(e){var t=e.familyMember,r=e.familyMemberInjury,i=e.familyMemberDied,s=e.familyMemberCurrentCancer,o=e.familyMemberDesc;n.push((0,a.Z)({},t,{trauma:r,dead:i,alive:s,description:o})),h(n)}))}catch(r){}},D=function(){var e=(0,r.Z)(s().mark((function e(n){var a,r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.Z)("morby/"+n,{},"get");case 2:(a=e.sent)&&(t.Morbi=a.data,w(a),o(t),v(a.data.deseaseImagesList),null!==(r=a.data.deseaseImagesList)&&void 0!==r&&r.deseaseImageDesc&&(i=JSON.parse(a.data.deseaseImagesList.deseaseImageDesc),x(i)),b(a.data.deseaseHistoryDynamicsList));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,r.Z)(s().mark((function e(t){var n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.Z)("visits/patientId/"+t,{},"get");case 2:n=e.sent;try{n.data[0]&&(a=n.data,p(a))}catch(r){console.log(r)}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=(0,r.Z)(s().mark((function e(a){var r,c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.Z)("treatment/"+a,{},"get");case 2:r=e.sent;try{r.data&&(t.treatmentRB=r.data,o(t),c=r.data.treatmentDynamics,u=r.data.recipeList,n(c),i(u))}catch(s){console.log(s)}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=(0,r.Z)(s().mark((function e(t){var n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.Z)("analyses/"+t,{},"get");case 2:n=e.sent;try{n.data[0]&&(a=n.data,m(a))}catch(r){console.log(r)}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e){try{Promise.all([y(e),D(e),g(e),j(e),I(e)])}catch(t){}},C=(0,f.Z)().clearDataProfileTables,M=function(){var e=(0,r.Z)(s().mark((function e(n){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(),e.prev=1,e.next=4,y(n.patientId);case 4:return a=e.sent,console.log(a.data),a.data.birthDate=a.data.birthDate?c()(a.data.birthDate):null,t.Anket=a.data,t.Potient=a.data,o(t),e.next=12,k(n.patientId);case 12:Z("/profile"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return{onRowTable:M}}}}]);
//# sourceMappingURL=75.93a340df.chunk.js.map